@{
    ViewData["Title"] = "Home Page";
}

<canvas class="mask"></canvas>


<div class="fill">
    <div class="box" style="padding:30px 80px;">
        <section class="center title">欢迎使用</section>

        <div class="split"></div>
        <form class="form">
            <div class="split"></div>
            <div class="form-group">
                <input id="txtUserName" name="user" type="text" placeholder="用户名" class="form-control" v-model="model.user" required />
            </div>

            <div class="form-group">
                <input type="password" name="pwd" placeholder="密码" class="form-control" v-model="model.pwd" required />
            </div>

            <div class="center">
                <label>
                    <input type="checkbox" />
                    下次自动登录
                </label>

                <button type="button" class="btn btn-primary" @@click="dologin">&nbsp;登&nbsp;录&nbsp;</button>
            </div>
            <div class="split"></div>
            <div>

            </div>
        </form>

    </div>
</div>

<script>
    $(function () {
        var option = {
            //color:'#060',     // 前景色
            //baseColor:'#fff' // 背景色
            //generator:'hexagons' // 样式
        };
        var pattern = GeoPattern.generate('GitHub' + Math.random(), option);
        $('body').css('background-image', pattern.toDataUrl());

        $("#txtUserName").focus();

    });

    const vue = new Vue({
        el: "form",
        data: { model: { user: "", pwd: "" } },
        methods: {
            dologin: function () {
                if ($("form").valid() == false) {
                    $("form").find(":input.error:first").focus(); 
                    return;
                }

                let url = '@Url.Content("~/Home/Login")';
                var args = {
                    ticks: new Date().getTime(), userName: vue.model.user,
                    password: vue.model.pwd,
                    ccode: vue.model.user.length * vue.model.pwd.length * 3 * (new Date().getDate()),
                    scode:'@ViewBag.ServerCode'
                };

                ajax.post(url, args).then(function (rr) { alert(JSON.stringify(rr)); });
                 
            }

        }
    });
</script>